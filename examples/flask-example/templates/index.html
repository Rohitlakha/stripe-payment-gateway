<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Secure Payment | Flask Course</title>

  <!-- Load Stripe ONCE -->
  <script src="https://js.stripe.com/v3/"></script>

  <!-- Load your SDK -->
  <script src="http://localhost:4242/sdk/payment-sdk.js"></script>

  <style>

    body {
      margin: 0;
      padding: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .payment-container {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      text-align: center;
      width: 350px;
    }

    .payment-title {
      font-size: 24px;
      margin-bottom: 10px;
      color: #333;
    }

    .payment-description {
      color: #666;
      margin-bottom: 20px;
    }

    .payment-amount {
      font-size: 28px;
      font-weight: bold;
      color: #27ae60;
      margin-bottom: 25px;
    }

    .pay-button {
      background: #6772e5;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }

    .pay-button:hover {
      background: #5469d4;
    }

    .pay-button:disabled {
      background: gray;
      cursor: not-allowed;
    }

    .status {
      margin-top: 15px;
      font-size: 14px;
      color: #555;
    }

  </style>

</head>

<body>

  <div class="payment-container">

    <div class="payment-title">
      Flask Course Payment
    </div>

    <div class="payment-description">
      Secure payment powered by Stripe
    </div>

    <div class="payment-amount">
      â‚¹500
    </div>

    <button id="payBtn" class="pay-button">
      Pay Securely
    </button>

    <div id="status" class="status"></div>

  </div>


  <script>

    const button = document.getElementById("payBtn");
    const status = document.getElementById("status");

    button.addEventListener("click", startPayment);

    async function startPayment() {

      try {

        if (!window.StripeGateway) {

          status.innerText = "Payment system not loaded. Refresh page.";
          return;

        }

        button.disabled = true;

        status.innerText = "Redirecting to secure payment...";

        await StripeGateway.startPayment({

          projectId: "flask_course",

              amount: 500,

               backendUrl: "http://localhost:4242",

              successUrl: "http://localhost:5000/set-success",

                cancelUrl: "http://localhost:5000/set-cancel"

});



      }
      catch (error) {

        console.error(error);

        status.innerText = "Payment failed. Try again.";

        button.disabled = false;

      }

    }

  </script>

</body>

</html>
